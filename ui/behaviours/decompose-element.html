<script>
    Polymer({

        is: "effect-decomposer",

        properties:
        {
            baseDelay: {type: Number, value: 0},
            ordered: {type: Boolean, value: false}
        },

        ready: function()
        {
            var parent = this.parentNode
            var text = parent.textContent.trim()
            var letters = text.split('')

            parent.innerHTML = ''
            letters.map((letter, index) =>
            {
                var letterSpan = document.createElement("SPAN")
                var delayWeight = this.ordered ? index / 80 : Math.random() / 2

                letterSpan.innerHTML = letter //=== ' ' ? '&nbsp' : letter
                letterSpan.style['transition-delay'] = (this.baseDelay + delayWeight) + 's'
                parent.appendChild(letterSpan)
            })
        }
    })
</script>
